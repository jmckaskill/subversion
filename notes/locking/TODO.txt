TODO for locking
================


MUST HAVE
---------

* svn status -u shows lock info from repos.  (lundblad)

* 'svn up' needs to notify when it deletes a defunct token
       --> depends on patch-in-progress:
           rev svn_wc_notify_func_t (on trunk) (lundblad/sussman)

* fix svn_fs_access_t handling in svnserve (lundblad)

* fix 'svnadmin lslocks', 'svnlook lock', and 'svn info wcpath-or-URL'
  to handle the lock comment output, which can be multiple lines, in
  the same (at least similar) way that 'svn log' treats log messages,
  so they can be machine parseable. (fitz)

* autoversioning:

    - finish issue 2161:  PROPFIND depth 1 should show locked,
      nonexistent paths.  (cmpilato)

    - research interoperability with popular dav clients (collabnet folks)

* fix svn_xml_is_xml_safe.  currently, it allows invalid UTF8!  (lundblad)

* remove auto-force behaviour for svn unlock URL. (lundblad)

* decide if/how to handle locking of schedule-add paths.
  also decide if/how 'svn lock/unlock URL' should work on nonexistent paths.

   --> related bugs (?):

      - 'svn lock schedule-add-path' currently fails because it's
        sending working rev of '0', which the fs tries to check against.

      - 'svn unlock http://nonexistentURL' fails, because ra_dav
          can't PROPFIND on the imaginary path.  Yet the DAV spec says
          a locked, nonexistent path ("lock-null") *should* respond to
          a PROPFIND.  At a minimum, it should have lock properties
          attached.

      - 'svn unlock svn://nonexistentURL' also fails (but not file:///)
          ("doesn't exist in HEAD" error)

* scan the whole patch for TODO items introduced on the branch. (all, please)


NICE TO HAVE
------------

* improve cmdline help messages

* possibly teach mailer.py to send lock/unlock mails (fitz)

* remove ra_svn shim for multiple locks/unlocks (fitz)

* client test cases (fitz) [broad cases done]

* get httpd 2.0.54 released, so that svn 1.2 can compile on win32

* get neon 0.25 released, so the control-c bug can go away
  (chat with jorton about neon 0.25/svn 1.2 coordination?)

* make --keep-locks into a runtime 'config' option

-----------------------------------------------

* Questions:

   * Decide what should happen when unlocking in commit if an error happens.

   * how do locks relate to dump/load?  file as an enhancement? 


* Stuff to document in book:
     
       - 4 new hooks
       - 'lock' and 'unlock' commands, svn:needs-lock property.
       - svnadmin lslocks, rmlocks, lock
       - svnlook lock
       - 'svn info URL'
       - 'svn st -u' additions
       - new 'svn up' and 'svn commit' behaviors w.r.t. locktokens
       - two new bdb tables in BDB section.
       - update the description of autoversioning in appendix C!

         ### remember to update authz policy doc. 

* Autoversioning TODO:

 * propfind depth 1 on a collection should show lock-null resources.
   currently not happening.  can this be done *compatibly* with svn
   clients?

 * finish autoversioning:  see bug in issue 2161.
        --> autoversioning on win32 webfolders and MSWord ?
        --> investigate XP workaround for webfolders:
                http://www.winnetmag.com/Article/ArticleID/24478/24478.html
                http://zettai.net/Members/billfergus/1103749117/view
            IE->File->Open->URL, check 'open as webfolder'?

