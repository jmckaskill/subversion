                             -*- outline -*-

                         The Road to Milestone 3
                         =======================

Milestone 3 is scheduled for August 15th, and is defined as
self-hosting with a command line client.  It doesn't mean that every
bit of CVS functionality is covered yet, just the ones we need to
self-host.  We will have tests for everything we do support,
including: add, checkout, commit, copy, delete, local diff, import,
propget, propset, status, update, help.

What's left to do:

* World of DAV (gstein)

     Greg is going to bring the DAV layer back up to speed.  This
     includes:

       * using the new authentication system to get user/password
       * passing this info to Apache, and then into the new write-hooks
       * making properties work -- without leaving RA-specific ones
                                   in the repository.

             (This is the semi-large project.  It may require some
              large changes to mod_dav itself, not just mod_dav_svn.
              
       * modifying python tests to run over RA_DAV (sussman will do.)

* Mime-types:  (cmpilato -- working on)

    Working on heuristic to determine if an added file is binary or
    not; will record this via a property.  This will (later) affect
    keyword substitution and line endings.  It will also affect
    whether we can safely run 'diff' and 'patch' under the hood when
    receiving updates to the file.

    Also: Mike Pilato is keeping track of the "spec" for keyword
    substitution, newline conversion, and mime type stuff.  He's
    writing a document based on Branko's original proposal and
    incorporating feedback from the rest of the list.  For M3, we're
    just addressing the question of text vs binary, that's all we need
    for now.

* DB_RUN_RECOVERY:  (kfogel, and maybe gstein?)

   Still need to write cross-process locking function so that the
   repository can repair itself when this error is returned.  We
   believe APR now has the means to help us with this.

* Hooks: (cmpilato, kfogel -- working, nearly done)

    The write-hooks are working now, and we have the 'svnlook' tool
    for assisting hook scripts.  We might attempt to get sentinels, or
    at least read sentinels, working if time permits.

* Authentication:  (sussman -- working, nearly done) 

        - ra_local just gets a username.
 
        - ra_dav will get username/password, store them in working
          copy, and allow Apache to authenticate.

      Usernames are stored automatically as properties on transaction
      and revision roots, along with log messages and datestamps.

* Authorization:   finished -- simple for now.

        - for ra_local, the Unix filesystem is all the security there
          can be.  The user running the svn client app either does or
          doesn't have permission to read/write the Berkeley DB files.

        - for ra_dav, Apache does the authorization by looking at a
          list of committers in a .conf file.
          [hmmm, kfogel wonders why we now have two different ways to
          do write authorization, will ask on the list]

        - more complex authorization (such as per-directory rights)
          can be done using hook scripts.

* Make a tarball dist.  (kfogel)

  Make sure "make dist" works, establish release process, do a
  release. :-)

* `svnadmin' program enhancements (sussman)

  svnadmin needs ability to edit txn and rev properties, and to remove
  stale txns.

* Backup system for commits in the new svn repository.  (kfogel)

  Commit diffs should be backed up, so we don't lose data if there's
  an fs bug.  Set up a system.

* Filesystem deltification optimization (kfogel, maybe cmpilato)

   Karl is worried about speed of our deltification right now; we may
   optimize it, if time permits.
