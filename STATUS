     * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     *                                                     *
     *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
     *                                                     *
     * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.5.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.


Candidate changes for 1.5.9:
============================

 * r876180
   Resolves issue #3374, "svn cp --parents path URL encoding issues"
   For
     svn cp --parent ^/fö ^/dö/fö
   The --parents code checked and might creat^/d%C3%B6, while the file was
   copied to ^/dö as expected.
   Justification:
     Without this patch --parents is broken for utf8 characters in repos
     to repos copy and move operations.
   Votes:
     +1: rhuijben
     -0: gstein (encoding issues are tricky; I'd rather tell people to
                 upgrade to 1.6.0, rather than 1.5.6)

 * r876185
   On Windows don't retry deleting a file 100 times when this file is really
   not a file but just a directory.
   Justification:
     Makes removing unversioned directories much faster.
     (You can see the delay with: svn rm --force <unversioned-empty-directory>)
   Votes:
     +1: rhuijben
     -0: gstein (edge case performance fixes shouldn't be backported; if
                 the user wants the fix, they can upgrade to 1.6.0 rather
                 than 1.5.6)

 * r876601
   Yet another merge performance improvement: Potentially reduce server
   queries about subtree mergeinfo during reverse merges.
   Justification:
     Large numbers of subtrees with mergeinfo can significantly slow merge
     performance, this alleviates that somewhat in a common use case.
   Votes:
     +1: pburba

 * r877146, r877157
   Fix issue #3392 'Parsing error with reverse merges and non-inheritable
   mergeinfo'
   Justification:
     Can cause repeat merges to break in the presence of non-inheritable
     mergeinfo.
   Notes:
     r877146 is a test for the issue, r877157 is the fix.
   Branch:
     ^/subversion/branches/1.5.x-issue3392
   Votes:
     +1: pburba, arfrever

 * r877211
   Make some sweeping pool lifetime fixes in the BDB backend.
   Justification:
     Bringing 'svn ls -v' over HTTP on a directory with 10000 files
     from 2Gb+ of RAM to under 400Mb is a very good thing.
   Notes
     The merge conflicts in a few places due to some minor cleanups
     performed post-1.5.x.  A backport branch resolving it can be
     found here:
     http://svn.collab.net/repos/svn/branches/1.5.x-r37137
   Votes:
     +1: cmpilato, arfrever

 * r877853
   Fix a potential segfault when doing noop file merges.
   Justification:
     Not common, but a segfault is a segfault.  See
     http://svn.haxx.se/dev/archive-2009-05/0363.shtml.
   Notes:
     There are text conflicts in both merge.c and merge_tests.py, a
     backport branch resolving these can be found at:
     http://svn.collab.net/repos/svn/branches/1.5.x-r37779.
   Votes:
     +1: pburba

 * r878142
   Fix issue #3119, "File '...' already exists" when it obviously doesn't,
   during commit.
   Justification:
     This was introduced in 1.5.1 and propagated till now.
   Votes:
     +1: stylesen
     -1: pburba (This change uses a 1.6 API, svn_error_compose_create).

 * r878760-7
   Fix serious bugs in libsvn_ra_svn and svnsync.  (If svnsync errors
   while syncing from svnserve to mod_dav_svn, it commits a
   half-written transaction rather than aborting it.)
   Justification:  
     A potentially large audience of users may unknowingly be creating
     corrupt repository mirrors!
   Notes:
     Running 'svn merge -r876759:876761 ^/truenk' creates a spurious
     one-line conflict for some reason, perhaps due to linefeeds.
     Easy to clean up.
   Votes:
     +1: sussman

 * r879093
   Fix bug where svn_[rangelist|mergeinfo]_[merge|intersect|remove|diff]
   APIs can modify their *non*-output arguments.
   Justification:
     No reports of this causing any problems that I know of, which is
     probably due to the fact that users of an API like svn_mergeinfo_merge
     typically only care about the output arguments.  The new C tests added
     to mergeinfo-test.c clearly demonstrate the bug.
   Branch:
     ^/branches/1.5.x-r39109
   Votes:
     +1: pburba, hwright

  * r1028084, r1028125
    Fix JVM recognition on OS X Snow Leopard (10.6).
    Justification:
      Buildings Subversion on OS X 10.6 can be impossible, or more difficult,
      without porting this.
    Notes:
      Apple has updated their JDK structure that results in its JDK not being
      found on Snow Leopard.  This can be worked around by using the --with-jdk
      configure option but it was never required before and the JDK structure
      isn't exactly intuitive enough to expect regular people to know how to
      find the right path to use.
    Votes:
      +1: jwhitlock
      -0: stsp (not a critical build or security fix -- maybe just
                document the workaround instead?)

Approved changes:
=================

 * r876925, r876931
   'svnadmin upgrade'-ing pre-1.2 repositories fails for lack of
   'db/format' file.
   Justification:
     'svnadmin upgrade' was designed to allow for this situation, but clearly
     does not.
   Notes:
     Backport branch needed, the function in question has seen a lot of churn.
   Votes:
     +1: cmpilato, danielsh, rhuijben
     -0: hwright (until such time as a backport branch exists)

 * r1041438
   Further improvement to an approved backport of a blame -g server-side
   memory leak fix (r1032808).
   Justification:
     Very simple change that fixes another memory leak.
   Notes:
     In the test case described in
     http://svn.haxx.se/dev/archive-2010-11/0163.shtml, r1032808 dropped
     svnserve's peak memory use from 574 MB to 71 MB.  r1041438 further
     drops it to 51 MB.
   Votes:
     +1: pburba, hwright, cmpilato (via IRC)

 * r880082
   Respect Apache's ServerSignature directive.
   Justification:
     Many subversion server administrators want it.
   Votes:
     +1: stylesen, cmpilato, hwright

 * r879293
   Perform MIME type matching case-insensitively.  (Issue #3479)
   Justification:
     The broken behavior is inconsistent with the way MIME mapping
     files are used everywhere else in the world.
   Notes:
     This merge will conflict due to changes in the path APIs.  Use
     --accept=theirs-conflict to merge it, and then replace the one
     introduced call to svn_dirent_local_style() with svn_path_local_style().
   Votes:
     +1: cmpilato, pburba, hwright

 * r877842
   Make svnadmin load tolerate mergeinfo with "\r\n".
   Justification:
     Prior to this change you cannot load a dump file that contains Windows
     style newlines in svn:mergeinfo.  See
     http://svn.haxx.se/dev/archive-2009-05/0179.shtml.
   Votes:
     +1: pburba, cmpilato, hwright
