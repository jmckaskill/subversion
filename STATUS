      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.6:
================

Candidate changes:

 * r37478, r37543, r37544, r37545, r37547
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: rhuijben, cmpilato (Introduces new features and changes output)

 * r38004, r38014, r38028, r38122
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: psamuelson, stsp (without r38122) (code is ugly and Linux-specific -
                                            would getenv("WINDOWID") work
                                            instead?)

 * r38417, r38424
   Fix issue #3443 'Obtaining implicit subtree mergeinfo hammers merge
   performance'
   Justification:
     If a merge target has "large" numbers (100's or 1000's) of subtrees
     with explicit mergeinfo, then this change can result in dramatic
     performance improvements, see example described in
     http://subversion.tigris.org/issues/show_bug.cgi?id=3443#desc1
   Notes:     
     Also see http://svn.haxx.se/dev/archive-2009-07/0149.shtml for
     discussion of this change.
   Branch:
     ^/branches/1.6.x-issue3443
   Votes:
     +1: pburba, arfrever

 * r38142, r38267, r38269, r36788, r37129, r37521, r37591, r37523, r38195,
   r38247, r38325, r38349, r38352
   Fix issue #3432 'Merge can record mergeinfo from natural history gaps'
   Justification:
     Gaps in merge sources can lead to the creation of invalid mergeinfo
     or the removal of valid mergeinfo.
   Notes:     
     The fix itself in r38325 is relatively simple, but recent refactoring
     of the merge code on trunk makes it look a lot worse than it is.
     Unless otherwise noted, all of the following are nominated simply to
     avoid a conflict nightmare:
     r38142, r38267, r38269 - New test and test tweaks for the issue.
     r36788 - Comment changes only.
     r37129 - Scope reduction of a pool.
     r37521 - Minor bug fix and some refactoring.
     r37591 - Comment changes only.
     r37523 - Merge code refactoring.
     r38195 - Pool use cleanup, no functional change.
     r38247 - More merge code refactoring.
     r38349 - Variable rename to avoid shadowing a previous local.
     r38352 - Remove an unused variable.
   Branch:
     ^/branches/1.6.x-issue3432
   Votes:
     +1: pburba

 * r38000, r38006, r38099, r38100, r38181, r38803, r38841, r38896,
   r38907, r39000, r39002, r39007, r39008, r39052
   Properly handle tree conflicts during replace.
   Justification:
     If a merge has a delete followed by an add on the same node, and
     also that node is modified locally, svn tried to create two tree-
     conflicts on the same node. That hit an assertion and bailed out,
     breaking the working copy.
   Notes:
     The cmdline test for this issue is merge_replace_causes_tree_conflict
     in merge_tests.py.
     Some revisions depend on API and working copy meta data changes made
     on trunk and don't merge cleanly. The backport branch omits any API
     and working copy metadata changes.
     Since some of these revisions revert or change edits from earlier
     ones, it makes more sense to review the diff of the branch rather
     than all the individual changes:
       svn diff -x-p ^/branches/1.6.x@39009 ^/branches/1.6.x-r38000
     See the log messages on the branch as well as those on trunk.
   Branch:
     ^/branches/1.6.x-r38000
   Votes:
     +1: stsp
     -1: julianfoad (r38000, r38006, r38099, r38100, r38181 only)

 * r35958, r36030, r38373, r38836, r38837, r38842
   Several fixes to the Win32 exception handler. This change also makes it
   available on Windows Vista and 7 where it was previously blocked by a
   version check.
   Justification:
     This exception handler is a valuable debugging tool for users who don't
     have development tools installed. (Most users on Windows).
   Notes:
     Most of these revisions cancel out each other. The real changes are in
     r38373 (removing version check) and r38836,r38842 (fixing formatting
     specifier). It's probably easier to review the combined patch than the
     individual revisions.
   Branch:
     ^/branches/1.6.x-r38836.
   Votes:
     +1: rhuijben
     +0: pburba - I don't have a Vista or Win7 box to try this out on, but it
         works fine on my XP box.

 * r38850
   Fix remaining part of Issue 3453: Building Subversion 1.6 requires GNU grep 2.5.
   Votes:
     +1: arfrever, stsp

 * r38851, r38875, r38881
   Fix Issue #3458: Use '$SED' instead of 'sed'.
   Notes:
     There are 2 trivial merge conflicts in configure.ac. The first (in Expat
     detection code) should be resolved with 'mc'. The second (with AC_PROG_SED)
     should be resolved with 'tc'.
   Votes:
     +1: arfrever, stsp

 * r38872
   Improve "Attempt to add tree conflict that already exists" error message.
   Justification:
     This error is being seen in the wild, possibly due to the problem the
     r38000 group is trying to fix. This change makes it easier to find
     out which .svn directory is causing the problem by printing its path
     as part of the error message.
   Votes:
     +1: stsp, danielsh

 * r38886
   Fix 2 failing tests in ruby bindings.
   Justification:
     1.6.5 shipped with these failures by accident. Failing regression tests
     can confuse packagers or other people who want to verify their freshly
     compiled binaries using our regression test suite.
   Votes:
     +1: stsp

 * r38959
   Fix 'svn export -r 1000000' (issue #3400).
   Justification:
     Don't silently do the opposite of what the user asked for.
   Votes:
     +1: danielsh

 * r38982
   Print a newline before the plaintext password prompt.
   Justification:
     It wasn't intentional that the first line of dashes of this prompt
     appears on the same line as "Transmitting file data ..." during commit.
   Votes:
     +1: stsp

 * r39019
   Fix bug where svn_[rangelist|mergeinfo]_[merge|intersect|remove|diff]
   APIs can modify their *non*-output arguments.
   Justification:
     No reports of this causing any problems that I know of, which is
     probably due to the fact that users of an API like svn_mergeinfo_merge
     typically only care about the output arguments.  The new C tests added
     to mergeinfo-test.c clearly demonstrate the bug.
   Branch:
     Resolves a minor conflict in libsvn_client/merge.c where the code
     changed was refactored on trunk.
     ^/branches/1.6.x-r39109
   Votes:
     +1: pburba

 * r39074
   This is *effectively* a reversion of r36720 in that it causes most Apache
   servers to use "text/plain" as the default MIME type when no other can
   be determined.
   Justification:
     The switch to "application/octet-stream" significantly degraded 
     Subversion's usability in terms of serving files directly from the
     repository to a browser client.  This change restores that usability.
   Votes:
     +1: cmpilato

Approved changes:
=================

 * r38927
   Fix issue #3281, "Merge a replacement of a directory".
   Justification:
     The result of a merge replacing a directory cannot be committed
     without this fix.
   Notes:
     See issue #3281, the issues linked from there, and the huge commment
     added in r38927 on trunk for more information.
   Branch:
     ^/branches/1.6.x-r38927
   Votes:
     +1: stsp, gstein, neels
