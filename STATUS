      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.1:
================

Candidate changes:

  * r36613, r36615, r36631, r36641
    Avoid potential segfault when dealing with subtree mergeinfo.
    Justification:
      One user reported a segfault due to the way, prior to this change, that
      we set children_with_mergeinfo elements to NULL rather than removing
      the elements from the array, see
      http://svn.haxx.se/dev/archive-2009-03/0382.shtml.
    Notes:
      While segfaults are serious, this one is not sufficient by itself to
      hold up 1.6.0 given that it is not a regression from 1.5.x, no one has
      been able to produce a reproduction recipe, and only one user has
      reported it (and they were able to work around it).  The fix itself is
      r36613, r36631, and r36641.  r36615 is a variable renaming change that
      is necessary to avoid a conflict.
    Votes:
      +1: pburba

 * r36178
   External merge-tool improvements.
   Justification:
     Makes automated merging easier, and also fixes a bug where a file
     which should be marked conflicted was consired sucessfully merged
     because the tool's exit status was not properly evaluated.
   Notes:
     The bug is only triggered when using an external merge tool with the
     --accept=launch option. I don't think we need to hold 1.6.0 on this.
   Votes:
     +1: stsp (I'd say it's a fix for a feature we already support (merge
               under control of external non-interactive tool), albeit
               the feature is currently so buggy that you can't use it.)
     
 * r36509
   Don't contact the server asking about implicit mergeinfo when the
   explicit mergeinfo tells us all we need to know about what to merge
   and what not to.
   Justification:
     Avoids needless communication with the server in some use cases.  For
     users with lots of subtree mergeinfo and slow network connections
     the performance improvement should be quite significant.
   Votes:
     +1: pburba

 * r36389-r36390, r36412, r36421, r36423, r36964
   Instead of verifying the pristine copy of a file before updating it, 
   calculate and verify the used text base (base/revert/copied) stream while
   applying the delta using the new stream checksum api. It also enables the
   verification of files where the workingcopy has no recorded checksum.
   Justification:
     This allows verifying and updating pristine files in a single pass, where
     we used two separate passes over the pristine file before.
     This enhances update performance on large files and most likely reduces
     the amount of work on-access virusscanners do on our files.
   Notes:
     r36389 contains the actual change. r36412 is a code cleanup patch.
     r36421,r36423 re-enable checking pristine files when apply_textdelta
     doesn't send a base checksum. (neon and serf before r36422).
     r36390 is a space before paren cleanup of update_editor.c needed for a
     clean merge.
     The reported failure occurs *after* the delta application process now,
     rather than when we start. However, the (probably-mangled) result is
     NOT cleaned up on a checksum error. One of the code blocks in
     window_handler() should be moved down, I think.
   Votes:
     +1: arfrever (without r36964)
     -0: gstein (looks like a fix is needed) (without r36964)
     +1: rhuijben

 * r36741, r36742
   Improve detection of Berkeley DB.
   Justification:
     Regression.
   Votes:
     +1: arfrever, gstein

 * r36730, r36766, r36775
   Fix issue #3383 'Foreign repository merge can add mergeinfo from the
   foreign repos'
   Justification:
     At best this mergeinfo refers to non-existent paths in the target's
     repos.  At worst the mergeinfo intersects with actual path/revisions
     in the merge target.  The latter might cause real problems, making it
     appear merges have been done that actually have not or vice-versa.
   Notes:
     r36775 is the fix, the other revisions are expansion of an existing
     merge test to cover this issue.
   Votes:
     +1: pburba, arfrever

 * r36816
   Correct an issue with diffing large data when whitespaces/eols are ignored.
   Justification:
     TortoiseMerge does diffing with EOLs ignored by default, and without this
     fix there's a diff shown at every 128k boundary even if the line has not
     changed at all.
   Notes:
     The variable naming is kind of wonky in there, making this real hard
     to understand "why" this patch works.
   Votes:
     +1: steveking, gstein

 * r36874, r36875
   Fix crash when upgrading to 1.6 format (r36874).
   Modified change-svn-wc-format.py to create or update format file
   in the .svn folder. (r36875)
   Justification:
     r36874 is needed to make the script work reliably.
     r36875 is a workaround for a bug in 1.6.0, which was fixed in
     1.6.1. Bit late. But the fix makes sense in 1.6.x only,
     so let's do it while here! The script won't work with 1.7.
   Votes
     +1: stsp

 * r36879
   Fix a merge bug which can occur when the merge target or a subtree of
   the target has non-inheritable mergeinfo.
   Justification:
     I don't know that anyone has encountered this problem in the wild, but
     the code is clearly incorrect and r36879 expands an existing merge
     test to demonstrate how it could result in incorrect mergeinfo.
   Votes:
     +1: pburba

 * r36913
   Fix race condition in ra_serf which can cause infinite-loop during a commit.
   Justification:
     Fixes an endless loop triggered by google code when using ra_serf.
   Votes:
     +1: sussman (via mail), lgo
     +0: rhuijben (concept; requires better review for a +1)

 * r36919
   Fix issue #3250 'Repeated merging of conflicting properties fails'.
   Justification:
     This issue exists since 1.5.x.
   Votes:
     +1: stylesen


Approved changes:
=================
