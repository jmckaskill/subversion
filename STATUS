      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.14:
================

Candidate changes:

 * r879766
   Fix issue #3498: Subversion password stores freeze Eclipse
   Justification:
     All subclipse users are in great need of this.
   Branch:
     Resolves a minor conflict in libsvn_auth_gnome_keyring/gnome_keyring.c
     where the code changed was refactored on trunk.
     ^/subversion/branches/1.6.x-r39692
   Votes:
     +1: stylesen
     +0: julianfoad (reviewed, not tested)
     -0: rhuijben (needs more explanation: The not-interactive and no
                   callback code paths should be more similar if the code
                   works correctly. I think the not interactive code path
                   needs the same fix).

 * r878590, r878607, r878625, r878626, r878627
   In trunk we optimized the common case of 'find-and-replace with same uri'
   of proxied content thanks to issue 3445 "WebDAV proxy code munging user
   data".
   r878590 is just a change that adds FIXME marker to code comment. We take it
   to avoid spurious conflicts with other revisions.
   r878607 Special cases no-op find and replace.
   "r878625, r878626, r878627" are follow-up to r878607 and the other long 
   pending Master info leak to the clients.
   Justification:
     1. This group has the most common 'optimization' fix of *not* groking the
        proxied response to find and replace with same string.
     2. Fixes the master information leak via the Location header.
     3. Need this to be ported for the other defect to be ported
        without conflict.
   Votes:
     +1: kameshj, cmpilato
     -0: julianfoad (seem to be multiple changes here for different reasons -
           at least issue '3445 and an optimization and an information leak;
           r878607 log msg says it fixes bugs but it's not clear what bugs;
           don't know how to tell whether justification 1 is significant;
           justifications don't seem to refer to issue #3445. Please can we
           separate these changes and clearly describe each one? And update
           the r878607 log msg.)

 * r916286, r917512
   Fixes failing commmits (with vague error messages) seen on client
   side for WebDAV proxy configurations such as the following (note
   the trailing slash at the end of '/svn/'):

      <Location /svn/>
         DAV svn
         SVNParentPath /repositories
         # Trailing slash on the master URI also can cause the confusion.
         SVNMasterURI http://master/svn/
         SVNAdvertiseV2Protocol Off
      </Location>

   Error message shows up like so:

      svn: Commit failed (details follow):
      svn: MKACTIVITY of '/svn/demujin/!svn/act/4b6d547c-018d-4e02-9d3f-2b28\
      3076cc06': Could not read status line: connection was closed by server\
       (http://localhost)

   Notes:
     Depends on the r878590 group for a conflict-free backport.
   Justification:
     Fixes failed commits.
   Votes:
     +1: kameshj

 * r917523
   If the configured slave url employes URI-unsafe characters
   (<space>, '?', '%'), proxying of commits fails and commit affects
   the slave repository directly.
   Notes:
     This backport depends on the r878590 and r916286 groups only for the
     conflict free port.
   Justification:
     With this commit we avoid accidental commit to the slave and hence 
     making it unusable as a proxy anymore.
   Votes:
     +1: kameshj

 * r997026, r997070, r997474
   For issue #3709 ("Inconsistency between "svn list" and "svn
   checkout"), omit unreadable paths from the get-dir RA response.
   Justification:
     Fixes 'svn ls -R' failing when recursing into a read-blocked
     subdirectory by teaching servers not to mention such
     subdirectories so the client doesn't try to recurse into them.
   Notes:
     Depends on the r996884 group for a function rename and
     introduction of another.
   Votes:
     +1: cmpilato

 * r997471
   Client-side workaround for issue #3709 ("Inconsistency between "svn
   list" and "svn checkout").
   Justification:
     Fixes issue #3709 for clients talking to servers that don't strip
     out unreadable paths from their get-dir responses.
   Votes:
     +1: cmpilato
 * ^/subversion/branches/1.6.x-no-wcng-check
   Remove the function subversion/libsvn_wc/questions.c:is_inside_wc_ng()
   and its uses.
   Justification:
     First, per issue #3729, the performance cost of this check is
     atrocious (as it seems to happen many, many times in the course
     of a checkout) and, according to some CollabNet customers,
     unbearable.  Secondly, the workaround stsp added to allow the
     1.6.x test suite to run inside a trunk-managed working copy tells
     us that it's not necessarily the case that creating a 1.6 working
     copy below some 1.7+ wcroot is problematic.  It can be concluded,
     then, that we might just be trying to stop a problem that doesn't
     exist, and making every 1.6.6+ user pay a high cost for our
     preventative efforts.  That's bad.
   Branch:
     ^/subversion/branches/1.6.x-no-wcng-check
   Votes:
     +0: cmpilato
     +1: stsp (I agree with the points cmpilato has raised in the issue.
               Let's deal with this problem, if it really turns out to
               be relevant, after 1.7 is released. We can still issue a 1.6.x
               patch release at that point to fix any such problems.
               Until then, we don't need to bother our users with this.
               Especially since doing so is causing them real problems now.)

 * r1024269
   Fix issue #3733, which tracks an API knowledge violation in the repos
   dumpstream loading code.
   Justification:
     Because our "generic" dumpstream logic is casting a caller-supplied
     baton into a specific type and accessing that baton's innards, any
     amount of badness is likely to ensue.
   Branch:
     ^/subversion/branches/1.6.x-r1024269
   Votes:
     +1: cmpilato

 * r1028108
   Fix issue #3270 ("'svn log -g' should more gracefully and
   conservatively handle invalid mergeinfo source paths")
   Justification:
     Mergeinfo can contain bogus paths, either because Subversion
     recorded it that way (issue issue #3271) or because it was
     hand-edited that way.  But one bogus location in mergeinfo 
     is not a good reason to ignore the other non-bogus ones.
   Votes:
     +1: cmpilato, hwright

 * r1031165, r1031186
   Fix issue #3666 ("Assertion frb->last_filename == NULL fails in 
   libsvn_client/blame.c").
   Justification:
     Aborting code?  Yep.  Uncool.
   Votes:
     +1: cmpilato, hwright

 * r1033166
   Prevent mod_dav_svn from trying to walk SVNParentPath collections.
   Justification:
     Without this fix, mod_dav_svn can be made to crash if the SVNParentPath
     directive is used.
   Votes:
     +1: stsp, hwright

Veto-blocked changes:
=====================

 * r877552, r877617, r877618, r877619, r877621
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: cmpilato (Introduces new features and changes output)
     -1: rhuijben (Introduces new features and changes output;
                   I think it should be removed from STATUS)

 * r878078, r878088, r878102, r878196
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: peters
     -1: rhuijben ("/proc/%ld/stat" is ugly and Linux-specific -
                   would just getenv("WINDOWID") work instead?)
     -1: stsp (I've removed the Linux-specific code from trunk in r1002144
               and r1002151, so trunk code only relies on getenv("WINDOWID").
               I would +1 a backport that also merges these revisions).

 * r921453, r927184, r927243
   Fix reopened issue #3020 'Reflect dropped/renumbered revisions in
   svn:mergeinfo data during svnadmin load'
   Justification:
     Prior to this fix, when loading a partial dump with mergeinfo, the
     resulting mergeinfo in the target repository could refer to non-existent
     revisions or revisions that have nothing to do with the merge source
     in the original repository.  The original fix for issue assumed that
     the dump stream was for a complete repository.
   Notes:
     r921453 and 927184 are tests, r927243 is the fix.
   Branch:
     ^/subversion/branches/1.6.x-issue3020
   Votes:
     +1: kameshj
     -1: pburba (There is a regression with this fix, see
         http://svn.haxx.se/dev/archive-2010-03/0716.shtml)

 * r933194
   Fix for issue #2753
   SVNListParentPath feature doesn't work when svn authz is used.
   Justification:
     This issue is waiting for resolution for more than 3 years.
   Notes:
     See discussion at http://svn.haxx.se/dev/archive-2010-04/0275.shtml
   Votes:
     -1: cmpilato (pending results of aforemented discussion)

 * r950445, 950468
   Fix for issue #2591 "'svnadmin hotcopy' does not replicate symlinks".
   Justification:
     This fix helps server administrators who has common files symlinked
     across their repositories and take frequent backups of their repos
     using svnadmin hotcopy.
   Notes:
     r950445 fixes the issue and r950468 is a test for this issue.
     In r967173 on trunk, svn_io_dir_walk()'s original functionality
     was restored, and svn_io_dir_walk2() introduced to also cover
     symlinks.
   Votes:
     +1: stylesen,
     -0: julianfoad (Tested and works fine, but changes semantics of
           svn_io_dir_walk() which we should not do in a back-port.
           Discussing on list.)
     -1: cmpilato (Changes semantics of svn_io_dir_walk()).

Approved changes:
=================

 * r964349
   Create fails.log files for test runs.
   Justification:
     Developer convenience.
   Notes:
     Somewhat non-trivial merge conflicts.
   Votes:
     +1: danielsh, cmpilato, stsp

 * r991534
   Fix random test failures when tests are run in parallel over DAV.
   Justification:
     Random test failures irritate developers trying to do release
     testing. See also the r877814 backport.
   Backport branch:
     ^/subversion/branches/1.6.x-r991534
   Votes:
     +1: stsp, cmpilato, hwright

 * r877219, r877239
   In Makefile.in, try svnversion from $PATH if in-tree svnversion fails.
   Justification:
     When building 1.6.x within a trunk WC there's always an error signalled
     at the end of the build. This makes scripting the build harder than
     necessary. Merging this change makes life easier for developers.
   Votes:
     +1: stsp
     +0: hwright

 * r1032259
   Fix issue #3745, "svn export mistakenly uri-encodes paths"
   Justification:
     Without this fix, users cannot export paths from working copies
     if the paths contain special characters such as spaces.
   Branch:
     ^/subversion/branches/1.6.x-issue3745
   Votes:
     +1: stsp, cmpilato, hwright

 * r1032808
   Fix blame -g server-side memory leaks.
   Justification:
     As detailed in http://svn.haxx.se/dev/archive-2010-11/0102.shtml,
     blame -g can trigger a serious server side memory leak.
   Votes:
     +1: pburba, cmpilato, hwright

 * r1022675 (r982355 from ^subversion/branches/performance)
   Limit the amount of unused memory fragments held by the root pools.
   Justification:
     In combination with blame -g server side memory leaks, see r1032808 and
     http://svn.haxx.se/dev/archive-2010-11/0102.shtml, svnserve's memory
     usage can get bloated and stay that way, see
     see http://svn.haxx.se/dev/archive-2010-11/0165.shtml.
   Notes:
     Use --accept=mine-full to avoid bizzare branch root property conflicts
     on 'svn:ignore' and 'bugtraq:logregex'.  This happens for me with both
     1.6.14 and trunk@1032984.
   Votes:
     +1: pburba, cmpilato, hwright
