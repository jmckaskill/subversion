      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.13:
================

Candidate changes:

 * r879766
   Fix issue #3498: Subversion password stores freeze Eclipse
   Justification:
     All subclipse users are in great need of this.
   Branch:
     Resolves a minor conflict in libsvn_auth_gnome_keyring/gnome_keyring.c
     where the code changed was refactored on trunk.
     ^/subversion/branches/1.6.x-r39692
   Votes:
     +1: stylesen
     +0: julianfoad (reviewed, not tested)
     -0: rhuijben (needs more explanation: The not-interactive and no
                   callback code paths should be more similar if the code
                   works correctly. I think the not interactive code path
                   needs the same fix).

 * r878590, r878607, r878625, r878626, r878627
   In trunk we optimized the common case of 'find-and-replace with same uri'
   of proxied content thanks to issue 3445 "WebDAV proxy code munging user
   data".
   r878590 is just a change that adds FIXME marker to code comment. We take it
   to avoid spurious conflicts with other revisions.
   r878607 Special cases no-op find and replace.
   "r878625, r878626, r878627" are follow-up to r878607 and the other long 
   pending Master info leak to the clients.
   Justification:
     1. This group has the most common 'optimization' fix of *not* groking the
        proxied response to find and replace with same string.
     2. Fixes the master information leak via the Location header.
     3. Need this to be ported for the other defect to be ported
        without conflict.
   Votes:
     +1: kameshj, cmpilato
     -0: julianfoad (seem to be multiple changes here for different reasons -
           at least issue '3445 and an optimization and an information leak;
           r878607 log msg says it fixes bugs but it's not clear what bugs;
           don't know how to tell whether justification 1 is significant;
           justifications don't seem to refer to issue #3445. Please can we
           separate these changes and clearly describe each one? And update
           the r878607 log msg.)

 * r916286, r917512
   Issue description:
    With the below apache configuration(See the trailing slash at the 
    end of '/svn/').

    <Location /svn/>
     DAV svn
     SVNParentPath /repositories
     #See the trailing slash on the master URI also can cause the confusion.
     SVNMasterURI http://master/svn/
     SVNAdvertiseV2Protocol Off
    </Location>

   Vague and useless error message *without* this fix on client side is
   snipped below.
   <snip>
   svn: Commit failed (details follow):
   svn: MKACTIVITY of '/svn/demujin/!svn/act/4b6d547c-018d-4e02-9d3f-2b283076cc06': Could not read status line: connection was closed by server (http://localhost)
   </snip>


   Notes:
     This backport depends on the r878590 group only for the conflict free port.
   Justification:
    With this fix commit successfully gets proxied and succeeds.
   Votes:
     +1: kameshj

 * r917523
     If the configured slave url has the *uri encodable* characters(<space>,
     '?', '%') *write through* is not happening rather commit happens in
     slave itself.
   Notes:
     This backport depends on the r878590 and r916286 groups only for the
     conflict free port.
   Justification:
    With this commit we avoid accidental commit to the slave and hence 
    making it unusable as a proxy anymore.
   Votes:
     +1: kameshj

 * r945350, r946767, r955369
   Fix issue #3242 'Subversion demands unnecessary access to parent
   directories of operations' as relates to reintegrate merges.
   Justification:
     Without this backport, reintegrate merges fail if the user isn't
     authorized to the root of the repository.
   Branch:
     Drift between trunk and 1.6.x, particularly in libsvn_client/merge.c
     necessitated a backport branch.
     ^/subversion/branches/1.6.x-issue3242-reintegrate
   Notes:
    r945350 adds a new merge_authz test for the issue.
    r946767 is the fix for the issue.
    r955369 is a fix for issue #3564 'added subtrees with mergeinfo break
    reintegrate', which was a regression introduced by r946767.  So despite
    having it's own issue number, it is a logical part of the issue #3242
    group.
    The rest of the issue #3242 fixes have already been backported in r934494.
   Votes:
     +1: pburba

 * r948512, r949307
   Fix issue #3646 'record-only merges create self-referential mergeinfo'.
   Justification:
     Prevents creation of self-referential mergeinfo (i.e. mergeinfo that
     is redundant with a path's natural history).  Self-referential mergeinfo
     is a source of confusion at best and a source of bugs at worst (e.g.
     http://subversion.tigris.org/issues/show_bug.cgi?id=3294#desc1 and
     http://svn.apache.org/viewvc?view=revision&revision=873767).
   Branch:
     WCNG work on trunk necessitated a backport branch.
     ^/subversion/branches/1.6.x-issue3646
   Notes:
     r948512 is a new test for the issue and r949307 is the fix.
   Votes:
     +1: pburba

 * r959760
   Fix the FSFS lock deletion code to properly clean up lock information
   instead of allowing stale lock data to remain indefinitely.
   Justification:
     Today, FSFS repositories that make use of user locks will consume
     unnecessary disk space and incur unnecessary processing penalties
     due to stale lock information (which is, thankfully, ignored as
     irrelevant rather than escalated as an error condition).
   Votes:
     +1: cmpilato

 * r957507
   Make the ruby bindings compatible with Ruby 1.9.
   Justification:
     Keeping up with the Jones's is a always desirable.
   Votes:
     +1: hwright

 * r958024, r961055, r964167
   Fix issue #3648 '2-URL merges incorrectly reverse-merge mergeinfo for
   merge target'.
   Justification:
     Prevents 2-URL merges from removing valid mergeinfo which can lead
     to spurious conflicts on subsequent merges.
   Branch:
     Drift between trunk and 1.6.x, necessitated a backport branch.
     ^/subversion/branches/1.6.x-issue3648
   Notes:
     r958024 is a new test for the issue, r961055 is the fix, and r964167
     is a comment tweak to the new test.
   Votes:
     +1: pburba

 * r964767, r965405, r965469, r965508
   Fix for issue #3683 "Escape unsafe charaters in a URL during export".
   Justification:
     This makes svn export more user friendly, by not forcing the user
     to manually encode the URLs before doing an export.
   Branch:
     The new API code changes in trunk requires a backport branch.
     ^/subversion/branches/1.6.x-issue3683
   Notes:
     r964767 is the actual fix. r965405 is the test for the fix and r965469
     and r965508 are the follow up commits to enhance the fix.
   Votes:
     +1: stylesen
     
 * r979045
   Teach mod_dav_svn to pass a base_checksum to libsvn_ra_neon's update
   editor. This enhances the early detection of broken working copies,
   which is good for general stability.
   Justification:
     While this is technically a protocol change it is fully forward
     and backwards compatible as it adds passing of an optional string.
     Even if we don't add this to 1.6.x, 1.6.x will see the string when
     connecting to newer servers and not parsing the value just makes
     the working copy less stable. There are no API changes.

     Trivial stability fix/
   Notes:
     The mod_dav_svn change needs a small backport fix as the brigade
     functions are not available in 1.6.
   Votes:
     +1: rhuijben

  * r979429
    Teach libsvn_ra_serf how to parse the md5-checksum for passing it
    to update editors.
    Justification:
      Without this fix the most important broken working copy detection
      checksum isn't used by users of libsvn_ra_serf.     
    Votes:
      +1: rhuijben

Veto-blocked changes:
=====================

 * r877552, r877617, r877618, r877619, r877621
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: cmpilato (Introduces new features and changes output)
     -1: rhuijben (Introduces new features and changes output;
                   I think it should be removed from STATUS)

 * r878078, r878088, r878102, r878196
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: peters
     -1: stsp, rhuijben ("/proc/%ld/stat" is ugly and Linux-specific -
                         would just getenv("WINDOWID") work instead?)

 * r921453, r927184, r927243
   Fix reopened issue #3020 'Reflect dropped/renumbered revisions in
   svn:mergeinfo data during svnadmin load'
   Justification:
     Prior to this fix, when loading a partial dump with mergeinfo, the
     resulting mergeinfo in the target repository could refer to non-existent
     revisions or revisions that have nothing to do with the merge source
     in the original repository.  The original fix for issue assumed that
     the dump stream was for a complete repository.
   Notes:
     r921453 and 927184 are tests, r927243 is the fix.
   Branch:
     ^/subversion/branches/1.6.x-issue3020
   Votes:
     +1: kameshj
     -1: pburba (There is a regression with this fix, see
         http://svn.haxx.se/dev/archive-2010-03/0716.shtml)

 * r933194
   Fix for issue #2753
   SVNListParentPath feature doesn't work when svn authz is used.
   Justification:
     This issue is waiting for resolution for more than 3 years.
   Notes:
     See discussion at http://svn.haxx.se/dev/archive-2010-04/0275.shtml
   Votes:
     -1: cmpilato (pending results of aforemented discussion)


 * r950445, 950468
   Fix for issue #2591 "'svnadmin hotcopy' does not replicate symlinks".
   Justification:
     This fix helps server administrators who has common files symlinked
     across their repositories and take frequent backups of their repos
     using svnadmin hotcopy.
   Notes:
     r950445 fixes the issue and r950468 is a test for this issue.
     In r967173 on trunk, svn_io_dir_walk()'s original functionality
     was restored, and svn_io_dir_walk2() introduced to also cover
     symlinks.
   Votes:
     +1: stylesen,
     -0: julianfoad (Tested and works fine, but changes semantics of
           svn_io_dir_walk() which we should not do in a back-port.
           Discussing on list.)
     -1: cmpilato (Changes semantics of svn_io_dir_walk()).

 * r980811, r981449
   Improve handling of missing fsfs.conf during svnadmin hotcopy.
   Justification:
     People are complaining. There's Debian bug reports and whatnot.
     See http://svn.haxx.se/dev/archive-2010-07/0471.shtml and follow-ups.
   Notes:
     r980811 is the actual fix
     r981449 is a follow-up which fixes an error leak
   Backport branch:
     ^/subversion/branches/1.6.x-r980811
   Votes:
     +1: stsp

 * r981921
   fsfs: make rev files read-only.
   Justification:
     They should never be changed.  Revprop edits are one suspected cause of
     rev file corruption; this *may* (total guess) prevent the corruption.
   Thread:
     http://svn.haxx.se/dev/archive-2010-08/0060.shtml
   Backport branch:
     ^/subversion/branches/1.6.x-r981921
   Votes:
     +1: danielsh

Approved changes:
=================
