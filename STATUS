      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.6:
================

Candidate changes:

 * r37478, r37543, r37544, r37545, r37547
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: rhuijben, cmpilato (Introduces new features and changes output)

 * r38004, r38014, r38028, r38122
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: psamuelson, stsp (without r38122) (code is ugly and Linux-specific -
                                            would getenv("WINDOWID") work
                                            instead?)

 * r38142, r38267, r38269, r36788, r37129, r37521, r37591, r37523, r38195,
   r38247, r38325, r38349, r38352
   Fix issue #3432 'Merge can record mergeinfo from natural history gaps'
   Justification:
     Gaps in merge sources can lead to the creation of invalid mergeinfo
     or the removal of valid mergeinfo.
   Notes:     
     The fix itself in r38325 is relatively simple, but recent refactoring
     of the merge code on trunk makes it look a lot worse than it is.
     Unless otherwise noted, all of the following are nominated simply to
     avoid a conflict nightmare:
     r38142, r38267, r38269 - New test and test tweaks for the issue.
     r36788 - Comment changes only.
     r37129 - Scope reduction of a pool.
     r37521 - Minor bug fix and some refactoring.
     r37591 - Comment changes only.
     r37523 - Merge code refactoring.
     r38195 - Pool use cleanup, no functional change.
     r38247 - More merge code refactoring.
     r38349 - Variable rename to avoid shadowing a previous local.
     r38352 - Remove an unused variable.
   Branch:
     ^/branches/1.6.x-issue3432
   Votes:
     +1: pburba

 * r38000, r38006, r38099, r38100, r38181, r38803, r38831, r38841, r38896,
   r38907, r39000, r39002, r39007, r39008, r39052, r39096, r39124,
   r39125, r39127
   Properly handle tree conflicts during replace.
   (See issue #3281 "Merge a replacement of a directory")
   Justification:
     If a merge has a delete followed by an add on the same node, and
     also that node is modified locally, svn tried to create two tree-
     conflicts on the same node. That hit an assertion and bailed out,
     breaking the working copy.
   Notes:
     The cmdline test for this issue is merge_replace_causes_tree_conflict
     in merge_tests.py.
     Some revisions depend on API and working copy meta data changes made
     on trunk and don't merge cleanly. The backport branch omits any API
     and working copy metadata changes.
     Since some of these revisions revert or change edits from earlier
     ones, it makes more sense to review the diff of the branch rather
     than all the individual changes:
       svn diff -x-p ^/branches/1.6.x ^/branches/1.6.x-r38000
     See the log messages on the branch as well as those on trunk.
     Here is a summary of the revisions, grouped by purpose:
       Fix the "tree conflict that already exists" error:
         r38000, r38006, r38181, r38841
       Add and tweak new merge tests:
         r38099, r38100, r38803, r39000, r39002, r39007, r39052
       Eliminate duplicate notifications and improve error messages:
         r38831, r38896, r38907, r39008, r39096, r39124, r39125, r39127
   Branch:
     ^/branches/1.6.x-r38000
   Votes:
     +1: stsp
     +1: sbutler (without r38831)

 * r35958, r36030, r38373, r38836, r38837, r38842
   Several fixes to the Win32 exception handler. This change also makes it
   available on Windows Vista and 7 where it was previously blocked by a
   version check.
   Justification:
     This exception handler is a valuable debugging tool for users who don't
     have development tools installed. (Most users on Windows).
   Notes:
     Most of these revisions cancel out each other. The real changes are in
     r38373 (removing version check) and r38836,r38842 (fixing formatting
     specifier). It's probably easier to review the combined patch than the
     individual revisions.
   Branch:
     ^/branches/1.6.x-r38836.
   Votes:
     +1: rhuijben
     +0: pburba - I don't have a Vista or Win7 box to try this out on, but it
         works fine on my XP box.

 * r39019
   Fix bug where svn_[rangelist|mergeinfo]_[merge|intersect|remove|diff]
   APIs can modify their *non*-output arguments.
   Justification:
     No reports of this causing any problems that I know of, which is
     probably due to the fact that users of an API like svn_mergeinfo_merge
     typically only care about the output arguments.  The new C tests added
     to mergeinfo-test.c clearly demonstrate the bug.
   Branch:
     Resolves a minor conflict in libsvn_client/merge.c where the code
     changed was refactored on trunk.
     ^/branches/1.6.x-r39109
   Votes:
     +1: pburba

 * r39301
   Allow non-threadsafe sqlite if APR has been compiled without threads.
   Justification:
     Subversion itself does not require threads, so it should be possible
     to compile it against non-threaded libraries. This change follows
     common practice in our code base by wrapping threading-related code
     in #if APR_HAS_THREADS.
   Notes:
     There is a trivial text conflict during merge, in the second hunk.
     To resolve it, choose 'edit', and keep only the line which reads
     "#endif /* APR_HAS_THREADS */" from the ".merge-right.r39301" part.
     Changes below that line do not apply to 1.6.x.
     The correct merge result adds only two lines, "#if APR_HAS_THREADS"
     and the corresponding #endif.
   Votes:
     +1: stsp

Approved changes:
=================

 * r39302
   Print a newline before the plaintext passphrase prompt.
   Justification:
     It wasn't intentional that the first line of dashes of this prompt
     appears on the same line as "Transmitting file data ..." during commit.
   Notes:
     Yes, this is almost the same as r38982, but this time it's about
     the passPHRASE prompt, not the passWORD prompt.
   Votes:
     +1: stsp, arfrever, stylesen
