      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.16:
=================

Candidate changes:

 * r879766
   Fix issue #3498: Subversion password stores freeze Eclipse
   Justification:
     All subclipse users are in great need of this.
   Branch:
     Resolves a minor conflict in libsvn_auth_gnome_keyring/gnome_keyring.c
     where the code changed was refactored on trunk.
     ^/subversion/branches/1.6.x-r39692
   Votes:
     +1: stylesen
     +0: julianfoad (reviewed, not tested)
     -0: rhuijben (needs more explanation: The not-interactive and no
                   callback code paths should be more similar if the code
                   works correctly. I think the not interactive code path
                   needs the same fix).

 * r878590, r878607, r878625, r878626, r878627
   In trunk we optimized the common case of 'find-and-replace with same uri'
   of proxied content thanks to issue 3445 "WebDAV proxy code munging user
   data".
   r878590 is just a change that adds FIXME marker to code comment. We take it
   to avoid spurious conflicts with other revisions.
   r878607 Special cases no-op find and replace.
   "r878625, r878626, r878627" are follow-up to r878607 and the other long 
   pending Master info leak to the clients.
   Justification:
     1. This group has the most common 'optimization' fix of *not* groking the
        proxied response to find and replace with same string.
     2. Fixes the master information leak via the Location header.
     3. Need this to be ported for the other defect to be ported
        without conflict.
   Votes:
     +1: kameshj, cmpilato
     -0: julianfoad (seem to be multiple changes here for different reasons -
           at least issue '3445 and an optimization and an information leak;
           r878607 log msg says it fixes bugs but it's not clear what bugs;
           don't know how to tell whether justification 1 is significant;
           justifications don't seem to refer to issue #3445. Please can we
           separate these changes and clearly describe each one? And update
           the r878607 log msg.)

 * r902467
   Fix broken svn_ra_get_mergeinfo API promise in serf and neon
   implementations -- return a null mergeinfo catalog if there is
   no mergeinfo, as per svn_ra_get_mergeinfo's API
   Justification:
     Fixes an uninitialized variable that can result in a segfault.
   Votes:
     +1: pburba, stsp

 * r916286, r917512
   Fixes failing commmits (with vague error messages) seen on client
   side for WebDAV proxy configurations such as the following (note
   the trailing slash at the end of '/svn/'):

      <Location /svn/>
         DAV svn
         SVNParentPath /repositories
         # Trailing slash on the master URI also can cause the confusion.
         SVNMasterURI http://master/svn/
         SVNAdvertiseV2Protocol Off
      </Location>

   Error message shows up like so:

      svn: Commit failed (details follow):
      svn: MKACTIVITY of '/svn/demujin/!svn/act/4b6d547c-018d-4e02-9d3f-2b28\
      3076cc06': Could not read status line: connection was closed by server\
       (http://localhost)

   Notes:
     Depends on the r878590 group for a conflict-free backport.
   Justification:
     Fixes failed commits.
   Votes:
     +1: kameshj

 * r917523
   If the configured slave url employes URI-unsafe characters
   (<space>, '?', '%'), proxying of commits fails and commit affects
   the slave repository directly.
   Notes:
     This backport depends on the r878590 and r916286 groups only for the
     conflict free port.  Alternatively, the back-port branch '1.6.x-r917523'
     attempts to represent a dependency-free version of the same change.
   Justification:
     With this commit we avoid accidental commit to the slave and hence 
     making it unusable as a proxy anymore.
   Branch:
     ^/subversion/branches/1.6.x-r917523
   Votes:
     +1: kameshj (with r878590 and r916286 groups)

 * r996383
   Add shorthands for 'svn --accept=%s' values.
   Justication:
     Require less typing to resolve conflicts.
   Votes:
     +1: danielsh, blair
     -0: rhuijben (Should we apply a change like this in a patch release?)
     -0:  stsp (I'd say no...)

 * r1036429
   Fix svnsync_tests 29 for BDB.
   Justification:
     Avoids an assert in the server.
   Votes:
     +1: philip
     +0: stsp (it fixes the test, but pburba asked on IRC how this change
               will affect replaced directories and I'm not sure about that)
     +0: pburba (we need to either backport this change or revert
                 r962377-962378 or hack up a better fix for issue #3641 and
                 backport that - see
                 http://svn.haxx.se/dev/archive-2010-11/0412.shtml)
     +1: danielsh (pburba: a fix to #3641 was committed to trunk)

 * r1028084, r1028125, r1041638
   Fix JVM recognition on OS X Snow Leopard (10.6).
   Justification:
     Buildings Subversion on OS X 10.6 can be impossible, or more difficult,
     without porting this.
   Notes:
     Apple has updated their JDK structure that results in its JDK not being
     found on Snow Leopard.  This can be worked around by using the --with-jdk
     configure option but it was never required before and the JDK structure
     isn't exactly intuitive enough to expect regular people to know how to
     find the right path to use.
   Votes:
     +1: jwhitlock
     +0.9: blair, I tested this on Snow Leopard and it worked, but
           didn't do a line-by-line review of the changes
     +0: danielsh (only touches java.m4)

 * 1.6.x-svn_fs_commit_txn branch
   Have all of server-side Subversion, from svn_fs_commit_txn(),
   through to mod_dav_svn, implement the documented (since 1.0.x)
   behavior that svn_fs_commit_txn() and svn_repos_fs_commit_txn()
   should indicate a successful commit by a valid returned revision
   number, not by any returned error.  Now, regardless if
   svn_fs_commit_txn()'s post commit FS processing (that's its new
   official name) fails, svn_repos_fs_commit_txn() will run the
   post-commit hook.  All code that uses svn_fs_commit_txn() and/or
   svn_repos_fs_commit_txn() now uses the revision number to test if
   the commit succeeded.
   Justification:
     Fixes bug reports on users@s.a.o where if post commit FS
       processing fails, the client reports an error but the commit
       succeeded, which is confusing for users.
     Implementing the documented and correct behavior is a good thing.
   Notes:
     For a successful unit test pass, it requires that r1051632,
       r1051638 and r1051751 listed above be merged previously.
     The branch has many commits in it from trunk, which includes some
       churn from reviews on trunk.  I recommend reviewing a cumulative
       diff:
       svn diff -r r1053420:r1053500 ^/subversion/branches/1.6.x-svn_fs_commit_txn
     This merge doesn't address the client side behavior.
   Branch:
     ^/subversion/branches/1.6.x-svn_fs_commit_txn
   Note:
     Adds a new private API, which would break 1.6.16 mod_dav_svn with
     1.6.15 libsvn_repos; thread:
     http://mid.gmane.org/20110214164421.GB19247@daniel3.local
   Votes:
     +1: blair
     =0: danielsh (haven't reviewed it yet)

 * r1053984
   Fix bug where committing a changelist was prevented by a file outside that
   changelist having unexpectedly changed special status.
   Justification:
     Local fix.  users@ reports.
   Votes:
     +0: danielsh
     -0: stsp (doesn't merge cleanly. Please create a backport branch.)

 * r1058269
   Fix issue #3486, "attempt to add tree conflict that already exists" again.
   Justification:
     Users should not be able to run into this situation.
   Branch:
     ^/subversion/branches/1.6.x-r1058269
   Votes:
     +1: stsp

  * 1.6.x-fsfs-begin-txn-deadlock
   Fix a deadlock that can occur when two or more multithreaded
   Subversion servers on the same system serve two or more fsfs
   repositories.
   Justification:
     Avoiding deadlocks is a good thing.
   Branch:
    ^/subversion/branches/1.6.x-fsfs-begin-txn-deadlock
   Votes:
     +1: blair

 * r1064839
   Additional fixes for issue #3270, required when the log is traversing
   complex histories that max out our internal history cache.
   Justification:
     We backported part of this fix already -- we should finish the job.
   Votes:
     +1: cmpilato, stsp

 * r880146
   When in `--dry-run' mode of `svn merge' command, property conflicts made an
   interactive callback to the user to resolve the conflicts, unlike the text
   conflicts. Suppress the interactive callback in `--dry-run' mode.
   Justification:
     Consistency. Removes an annoyance. Simple patch.
   Branch:
     ^/subversion/branches/1.6.x-r880146
   Votes:
     +1: julianfoad
     -0: stsp (Doesn't merge cleanly. Please create a backport branch.)

 * r1068988
   Don't use globbing where it's not necessary.
   Justification:
     It's an easy optimisation well worth doing!
   Votes:
     +1: stsp

 * r962377, r962378, r1063572, r1063573, r1063592
   Fix svnsync handling of directory copyfrom.
   Justification:
     Could lead to sync'd repositories being different from the master.
   Concerns:
     http://article.gmane.org/gmane.comp.version-control.subversion.devel/120590
   Votes:
     +1: cmpilato (r962377, r962378 only), philip
     -0: danielsh (authz concerns)

 * r1071239, r1071307
   Locks without athn SEGV in mod_dav_svn
   Justification:
     I think it can only happen during commit to a server that doesn't require
     authn, but a server SEGV is bad.
   Votes:
    +1: philip, stsp

Veto-blocked changes:
=====================

 * r877552, r877617, r877618, r877619, r877621
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: cmpilato (Introduces new features and changes output)
     -1: rhuijben (Introduces new features and changes output;
                   I think it should be removed from STATUS)

 * r878078, r878088, r878102, r878196
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: peters
     -1: rhuijben ("/proc/%ld/stat" is ugly and Linux-specific -
                   would just getenv("WINDOWID") work instead?)
     -1: stsp (I've removed the Linux-specific code from trunk in r1002144
               and r1002151, so trunk code only relies on getenv("WINDOWID").
               I would +1 a backport that also merges these revisions).

 * r921453, r927184, r927243
   Fix reopened issue #3020 'Reflect dropped/renumbered revisions in
   svn:mergeinfo data during svnadmin load'
   Justification:
     Prior to this fix, when loading a partial dump with mergeinfo, the
     resulting mergeinfo in the target repository could refer to non-existent
     revisions or revisions that have nothing to do with the merge source
     in the original repository.  The original fix for issue assumed that
     the dump stream was for a complete repository.
   Notes:
     r921453 and 927184 are tests, r927243 is the fix.
   Branch:
     ^/subversion/branches/1.6.x-issue3020
   Votes:
     +1: kameshj
     -1: pburba (There is a regression with this fix, see
         http://svn.haxx.se/dev/archive-2010-03/0716.shtml)

 * r933194
   Fix for issue #2753
   SVNListParentPath feature doesn't work when svn authz is used.
   Justification:
     This issue is waiting for resolution for more than 3 years.
   Notes:
     See discussion at http://svn.haxx.se/dev/archive-2010-04/0275.shtml
   Votes:
     -1: cmpilato (pending results of aforemented discussion)

 * r950445, 950468
   Fix for issue #2591 "'svnadmin hotcopy' does not replicate symlinks".
   Justification:
     This fix helps server administrators who has common files symlinked
     across their repositories and take frequent backups of their repos
     using svnadmin hotcopy.
   Notes:
     r950445 fixes the issue and r950468 is a test for this issue.
     In r967173 on trunk, svn_io_dir_walk()'s original functionality
     was restored, and svn_io_dir_walk2() introduced to also cover
     symlinks.
   Votes:
     +1: stylesen,
     -0: julianfoad (Tested and works fine, but changes semantics of
           svn_io_dir_walk() which we should not do in a back-port.
           Discussing on list.)
     -1: cmpilato (Changes semantics of svn_io_dir_walk()).

Approved changes:
=================
