      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.1:
================

Candidate changes:

  * r36613, r36615, r36631, r36641
    Avoid potential segfault when dealing with subtree mergeinfo.
    Justification:
      One user reported a segfault due to the way, prior to this change, that
      we set children_with_mergeinfo elements to NULL rather than removing
      the elements from the array, see
      http://svn.haxx.se/dev/archive-2009-03/0382.shtml.
    Notes:
      While segfaults are serious, this one is not sufficient by itself to
      hold up 1.6.0 given that it is not a regression from 1.5.x, no one has
      been able to produce a reproduction recipe, and only one user has
      reported it (and they were able to work around it).  The fix itself is
      r36613, r36631, and r36641.  r36615 is a variable renaming change that
      is necessary to avoid a conflict.
    Votes:
      +1: pburba

 * r36178
   External merge-tool improvements.
   Justification:
     Makes automated merging easier, and also fixes a bug where a file
     which should be marked conflicted was consired sucessfully merged
     because the tool's exit status was not properly evaluated.
   Notes:
     The bug is only triggered when using an external merge tool with the
     --accept=launch option. I don't think we need to hold 1.6.0 on this.
   Votes:
     -0: rhuijben (Looks like a feature enhancement for a patch release)
     +1: stsp (I'd say it's a fix for a feature we already support (merge
               under control of external non-interactive tool), albeit
               the feature is currently so buggy that you can't use it.)
     
 * r36149-r36151, r36156
   Fix starting apache httpd in daemon mode from python versions with
   win32process support. (Found after upgrading my python to 2.6.1)
   Justification:
     Without this fix I can't run the testsuite as non-admin after
     installing 2.6.1.
   Notes:
     r36149 and r36150 contain the actual fix and r36151 and r36156 clean up
     the mess I left after performing only partial commits.
   Votes:
     +1: rhuijben, arfrever

 * r36509
   Don't contact the server asking about implicit mergeinfo when the
   explicit mergeinfo tells us all we need to know about what to merge
   and what not to.
   Justification:
     Avoids needless communication with the server in some use cases.  For
     users with lots of subtree mergeinfo and slow network connections
     the performance improvement should be quite significant.
   Votes:
     +1: pburba

 * r36422
   Make serf report a base_checksum to apply_textdelta.
   Justification:     
     Enables some extra checking on what to update from the delta editor. This
     value is provided by ra_local and ra_svn, but not by neon and serf.
     (The information is sent in the http response since well before 1.0)
   Votes:
     +1: rhuijben
     
 * r36389-r36390, r36412, r36421, r36423
   Instead of verifying the pristine copy of a file before updating it, 
   calculate and verify the used text base (base/revert/copied) stream while
   applying the delta using the new stream checksum api. It also enables the
   verification of files where the workingcopy has no recorded checksum.
   Justification:
     This allows verifying and updating pristine files in a single pass, where
     we used two separate passes over the pristine file before.
     This enhances update performance on large files and most likely reduces
     the amount of work on-access virusscanners do on our files.
   Notes:
     r36389 contains the actual change. r36412 is a code cleanup patch.
     r36421,r36423 re-enable checking pristine files when apply_textdelta
     doesn't send a base checksum. (neon and serf before r36422).
     r36390 is a space before paren cleanup of update_editor.c needed for a
     clean merge.     
   Votes:
     +1: rhuijben


Approved changes:
=================

 * r36686, r36689
   Fix an apparent bug in crop.c: it was fetch a *pruned* list of entries,
   modifying the depth value of one of them, then writing the *subset* as if
   it were the entire list of entries.
   Justification:
     Makes it possible to corrupt the working copy by removing entries that
     shouldn't be removed.
   Notes:
     r36686 is the fix and r36689 adds a regression test.
   Votes:
     +1: rhuijben, gstein, danielsh

  * r36559
    Fix warning in Python 2.6 for ctypes-python bindings
    Votes:
      +1: djames, arfrever, gstein

  * r36093, r36292, r36406
    Improve some messages.
    Votes:
      +1: arfrever, gstein, rhuijben

  * r36388
    Recommend Neon 0.28.4.
    Votes:
      +1: arfrever, gstein, rhuijben,
          steveking (already using neon 0.28.4 in TSVN)

 * r36049-r36051, r36131
   Resolve the SVN_ERR_MALFUNCTION() reproducible on Windows with
     svn ci "C:/Program FIles" C:/Windows
   by handling parent directories correctly.
   (r36050 and r36050 are typo fixes; r36131 some extra cleanup)
   Justification:
     This malfunction makes update_tests.py 32 abort on Windows. Which in turn
     delays the Windows automated testrun until a user confirms.
     (This doesn't fix this testcase; it just handles this part of the problem)
   Votes:
     +1: rhuijben, pburba, steveking, gstein

 * r36159
   Fix proxying of LOCK and UNLOCK requests via WebDAV proxies.
   Justification:
     With the fix, each slave server tries to field the lock/unlock, resulting
     in competing ideas of what is and isn't locked.
   Votes:
     +1: cmpilato, rhuijben, arfrever, gstein

  * r36238
    Fix build of RHEL5 RPM packages.
    Justification:
      Won't build properly without these changes.  Not a release blocker for
      1.6.0 but would be nice if the train is still in the station.  Otherwise
      please feel free to move to 1.6.1.
    Votes:
       +1: dws, arfrever, gstein

  * r36252-36253 (on branch 1.6.x-r36252)
    Fix valgrind UMRs.
    Justification:
      UMRs are undefined behaviour
    Votes:
      +1: philip, rhuijben, stsp, arfrever, gstein
      
  * r36302
    Fix a small problem in the loggy upgrade process. Some v10 working copies
    have .svn/format, and some don't. The *intent* is to remove the file if
    present, so make the code match.
    Justification:
     If change-svn-wc-format.py is used to downgrade a working copy
     from 1.6 to 1.5 format, the script does not add the format file,
     rendering 1.6 clients unable to update the working copy again:
     "svn: Can't remove file '.svn/format': No such file or directory"
     Since the presence of that file has been deprecated for ages,
     let's just apply this easy fix to 1.6 instead of tweaking the script.
    Votes:
      +1: rhuijben, stsp, arfrever, gstein

  * r36213
    Trivial help output fix.
    Justification:
      Errors in documentation are bad, obvious fix.
    Notes:
      Already merged to 1.6.x by Arfrever in r36214, but reverted
      in 36322 because it was not formally voted on.
      And a few weeks later merged in r36625 by Jens Seidel and reverted
      in r36647.
    Votes:
      +1: stsp, arfrever, gstein, rhuijben

 * r36256
   Fix potentially awful performance of --ignore-ancestry merges.
   Justification:
     A very simple change which avoids an unneeded walk of the entire merge
     target.  For large WCs the performance improvment can be dramatic.
     See http://svn.haxx.se/dev/archive-2009-03/0067.shtml.
   Votes:
     +1: pburba, rhuijben, gstein, arfrever

 * r36444
   Optimize merge performance when dealing with subtree mergeinfo.
   Justification:
     Another simple change which, in many common situations, avoids unneeded
     communication with the server for each subtree with explicit mergeinfo.
     If the merge target has many subtrees with mergeinfo, the performance
     improvment can be dramatic, see
     http://svn.haxx.se/dev/archive-2009-03/0198.shtml.
   Votes:
     +1: pburba, rhuijben, arfrever
