      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.5:
================

Candidate changes:

 * r37478, r37543, r37544, r37545, r37547
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: rhuijben, cmpilato (Introduces new features and changes output)

 * r38004, r38014, r38028, r38122
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: psamuelson, stsp (without r38122) (code is ugly and Linux-specific -
                                            would getenv("WINDOWID") work
                                            instead?)

 * r38417, r38424
   Fix issue #3443 'Obtaining implicit subtree mergeinfo hammers merge
   performance'
   Justification:
     If a merge target has "large" numbers (100's or 1000's) of subtrees
     with explicit mergeinfo, then this change can result in dramatic
     performance improvements, see example described in
     http://subversion.tigris.org/issues/show_bug.cgi?id=3443#desc1
   Notes:     
     Also see http://svn.haxx.se/dev/archive-2009-07/0149.shtml for
     discussion of this change.
   Branch:
     ^/branches/1.6.x-issue3443
   Votes:
     +1: pburba

 * r38142, r38267, r38269, r36788, r37129, r37521, r37591, r37523, r38195,
   r38247, r38325, r38349, r38352
   Fix issue #3432 'Merge can record mergeinfo from natural history gaps'
   Justification:
     Gaps in merge sources can lead to the creation of invalid mergeinfo
     or the removal of valid mergeinfo.
   Notes:     
     The fix itself in r38325 is relatively simple, but recent refactoring
     of the merge code on trunk makes it look a lot worse than it is.
     Unless otherwise noted, all of the following are nominated simply to
     avoid a conflict nightmare:
     r38142, r38267, r38269 - New test and test tweaks for the issue.
     r36788 - Comment changes only.
     r37129 - Scope reduction of a pool.
     r37521 - Minor bug fix and some refactoring.
     r37591 - Comment changes only.
     r37523 - Merge code refactoring.
     r38195 - Pool use cleanup, no functional change.
     r38247 - More merge code refactoring.
     r38349 - Variable rename to avoid shadowing a previous local.
     r38352 - Remove an unused variable.
   Branch:
     ^/branches/1.6.x-issue3432
   Votes:
     +1: pburba

 * r38000, r38006, r38099, r38100, r38181
   Don't break the working copy when a tree-conflict features an incoming
   replace.
   Justification:
     My colleagues and some clients are really annoyed by this problem.
     Although it's been fixed, it is not in 1.6.x yet, which is met with
     little understanding. Releasing 1.6.5 without this patch would
     probably be some bad publicity...
   Notes:
     If a merge has a delete followed by an add on the same node, and
     also that node is modified locally, svn tried to create two tree-
     conflicts on the same node. That hit an assertion and bailed out,
     breaking the working copy.
     The cmdline test for this issue is merge_replace_causes_tree_conflict
     in merge_tests.py, should become nr. 133.
     (My `make check' with these revisions merged to 1.6.x is clean)
   Votes:
     +1: neels
     -1: stsp, julianfoad
         (not properly fixed; test passes for wrong reasons; see
         <http://subversion.tigris.org/ds/viewMessage.do?dsForumId=462&dsMessageId=2384930>)

 * r38799, r38801, r38805
   Complain when people try to resolve a tree conflict with any other
   resolution than '--accept=working'.
   Justification:
     It has been brought to my attention that people are actually trying
     to resolve tree conflicts automatically using the --accept option
     of 'svn resolve', e.g. 'svn resolve --accept=theirs-full victim'.
     It doesn't actually work as they expect, because only conflict
     markers get cleared (which is what --accept=working does).
     The documentation does not seem to indicate that this doesn't work
     either. So instead of having those poor folks scratch their heads
     at Subversion's behaviour, make the client tell them loud and clearly
     that what they are trying to do won't work.
     In practice it looks like this (line break added by me for STATUS):
       $ svn resolve --accept=theirs-full alpha
       svn: warning: Tree conflicts can only be resolved to 'working' state; \
         'alpha' not resolved
       $
   Notes:
     There are conflicts during merge. A backport branch is available
     at ^/branches/1.6.x-r38799.
   Votes:
     +1: stsp, sbutler

 * r35958, r36030, r38373, r38836, r38837
   Several fixes to the Win32 exception handler, to make it work on Windows
   Vista and 7.
   Justification:
     This exception handler is a valuable debugging tool for users who don't
     have development tools installed. (Most users on Windows).
   Notes:
     Most of these revisions cancel out each other. The real changes are in
     r38373 (removing version check) and r38836 (fixing formatting specifier).
     It's probably easier to review the combined patch than the individual
     revisions.
     A backport branch exists as ^/branches/1.6.x-r38836.
   Votes:
     +1: rhuijben

Approved changes:
=================
