      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.6.x line.

See "Stabilizing and maintaining releases" in trunk/www/hacking.html for
details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.6.10:
================

Candidate changes:

 * r878216, r878341, r878343, r876862, r877203, r877595, r877665, r877597, r878269,
   r878321, r878399, r878423, r878426
   Fix issue #3432 'Merge can record mergeinfo from natural history gaps'
   Justification:
     Gaps in merge sources can lead to the creation of invalid mergeinfo
     or the removal of valid mergeinfo.
   Notes:     
     The fix itself in r878399 is relatively simple, but recent refactoring
     of the merge code on trunk makes it look a lot worse than it is.
     Unless otherwise noted, all of the following are nominated simply to
     avoid a conflict nightmare:
     r878216, r878341, r878343 - New test and test tweaks for the issue.
     r876862 - Comment changes only.
     r877203 - Scope reduction of a pool.
     r877595 - Minor bug fix and some refactoring.
     r877665 - Comment changes only.
     r877597 - Merge code refactoring.
     r878269 - Pool use cleanup, no functional change.
     r878321 - More merge code refactoring.
     r878423 - Variable rename to avoid shadowing a previous local.
     r878426 - Remove an unused variable.
   Branch:
     ^/subversion/branches/1.6.x-issue3432
   Votes:
     +1: pburba, stsp

 * r876032, r876104, r878447, r878910, r878911, r878916
   Several fixes to the Win32 exception handler. This change also makes it
   available on Windows Vista and 7 where it was previously blocked by a
   version check.
   Justification:
     This exception handler is a valuable debugging tool for users who don't
     have development tools installed. (Most users on Windows).
   Notes:
     Most of these revisions cancel out each other. The real changes are in
     r878447 (removing version check) and r878910,r878916 (fixing formatting
     specifier). It's probably easier to review the combined patch than the
     individual revisions.
   Branch:
     ^/subversion/branches/1.6.x-r38836.
   Votes:
     +1: rhuijben
     +0: pburba - I don't have a Vista or Win7 box to try this out on, but it
         works fine on my XP box.
     +0: lgo - code reviewed and looks good, but I don't have access to a
         Windows machine.

 * r879766
   Fix issue #3498: Subversion password stores freeze Eclipse
   Justification:
     All subclipse users are in great need of this.
   Branch:
     Resolves a minor conflict in libsvn_auth_gnome_keyring/gnome_keyring.c
     where the code changed was refactored on trunk.
     ^/subversion/branches/1.6.x-r39692
   Votes:
     +1: stylesen
     +0: julianfoad (reviewed, not tested)
     -0: rhuijben (needs more explanation: The not-interactive and no
                   callback code paths should be more similar if the code
                   works correctly. I think the not interactive code path
                   needs the same fix).

 * r879902, r879916
   Disables file synchronization mutexes in fsfs on Windows. These mutexes
   were added to make POSIX systems lock files that were in use by other
   threads in the same process.
   
   Windows implements per filehandle locking, so it doesn't need these
   locks. We usually see the opposite problem in Subversion on Windows.
   Justification:
     This gives a measurable performance boost (5% decrease in running time
     on running the testsuite in parallel mode (on trunk). The difference
     will be bigger when measured on a real subversion server like one
     running apache or svnserve.
   Votes:
     +1: rhuijben

 * r880552
   Try to enable TCP keep-alives in svnserve.
   Justification:
     ra_svn clients do this, too. It should not do any harm.
     Is likely to fix hanging svnserve processes which still linger
     blocking on reads from sockets after days of inactivity on the
     connection, a problem seen and reported by MPlayer developers in #svn.
   Votes:
     +1: stsp, rhuijben

 * r892050, 892085
   Fix a reintegrate bug which can occur when the merge source has mergeinfo
   that explicitly describes common history with the reintegrate target.
   Justification:
     Reintegrate merges may not work if the reintegrate source has self-
     referential mergeinfo that is also self-referential to the reintegrate
     target.  This occured in our own repository, see
     http://svn.haxx.se/dev/archive-2009-12/0338.shtml.
   Votes:
     +1: pburba, rhuijben

 * r891672
   Fix issue #3552 - File external from URL cannot overwrite the existing
   versioned item
   Justification:
     This defect affects 'subversive' client users in 1.6.x.
   Notes:
     The backport branch exists in order to make the patch compatible with
     1.6.x tests. r876917 introduces 'switched' to wc status which is not 
     available in 1.6.x.
   Branch:
     ^/subversion/branches/1.6.x-r891672
   Votes:
     +1: stylesen

 * r896915
   On Windows, stop retrying a move operation without looking to the
   initial error code. 
   Justification:
     Without this patch the initial move error is lost, which makes it
     impossible to diagnose the real error.
   Votes:
     +1: rhuijben

 * r898048
   Extend the Windows only, crypto api verification of server certificates
   to check for certificate revocation. Also simplify the code by making
   Windows do the chain verification instead of just taking an intermediate
   result.
   Justification:
     It's better to be safe, when we are talking about SSL.
   Votes:
     +1: rhuijben

 * r901752
   Allow 'svn log' on an uncommitted copy/move destination.
   Notes:
     svn_client_log5 API promises that unspecified peg revisions default
     to svn_opt_revision_working for WC paths; prior to r901752 we were
     not keeping this promise.
   Justification:
     APIs should do what they say they do.
   Votes:
     +1: pburba
 
 * r904301, r904394
   Update every occurence of the Subversion repository URL to apache.org,
   except in CHANGES (for sentimental reasons, I guess).
   Justification:
     Tools and doc references should point at the new locations.
   Votes:
     +1: neels

 * r904594
   Update 'svnadmin verify' to recognize malformed/missing revprops files
   Justification:
     It's misleading for 'svnadmin verify' to say a repository is fine
     when in reality it isn't.
   Votes:
     +1: jwhitlock, danielsh

 * r905303
   Make 'svnadmin hotcopy' copy fsfs.conf for FSFS repositories.
   Justification:
     svnadmin hotcopy is supposed to copy all files.
   Votes:
     +1: stsp

 * r905326
   Issue #3561: Teach ra_serf the same out-of-date fix we taught ra_neon.
   Justification:
     Feature parity with ra_neon is goodness and fixes real-world issue.
   Branch:
     ^/subversion/branches/1.6.x-r905326
   Votes:
     +1: jerenkrantz, kameshj

 * r906256, 906305
   Fix issue #3573 'local non-inheritable mergeinfo changes not properly
   merged with updated mergeinfo'
   Notes:
   Justification:
     svn:mergeinfo should be mergeable, but in this issue mergeinfo changes
     brought down by an update were not properly merged with local changes.
   Notes:
     r906256 is a test demonstrating the problem and r906305 is the fix.
   Branch:
     ^/subversion/branches/1.6.x-issue3573
   Votes:
     +1: pburba

 * r877016, r902093
   Fix issue #3390 'relative externals not updated during switch'.
   Justification:
     One of the selling points of relative externals was their ability
     to be used to span branches and tags.  Not so useful if switching
     to a different tag or branch doesn't actually cause the external
     to point to the right place.
   Branch:
     ^/subversion/branches/1.6.x-issue3390
   Votes:
     +1: cmpilato, stsp

 * ^/subversion/branches/1.6.x-wc-ng-check-override
   Disable checks for WC-NG working copies while running the test suite.
   Justification:
     Allows 'make check' to succeed in working copies of the 1.6.x branch
     managed by an svn client from trunk. This is for developer convenience,
     it does not make a difference for users.
   Votes:
     +1: stsp

 * ^/subversion/branches/1.6.x-issue-3242-partial
   Merge a portion of the issue 3242 work, specifically the bit that
   makes mergeinfo queries in the client layer happen against the
   current RA session URL instead of forcibly against the repository
   root URL (which might not be readable by the user per authz
   policy).  While this is not a full solution to issue #3242, it
   should get us back to Subversion 1.4-level behavior which has
   pretty consistently been deemed acceptable (enough) by our user
   base.
   Justification:
     Issue #3242 is a hot issue.  Hot topic, hot tempers, etc.
   Votes:
     +1: cmpilato, ivan

 * r878590, r878607, r878625, r878626, r878627
   In trunk we optimized the common case of 'find-and-replace with same uri'
   of proxied content thanks to issue 3445.
   r878590 is just a change that adds FIXME marker to code comment. We take it
   to avoid spurious conflicts with other revisions.
   r878607 Special cases no-op find and replace.
   "r878625, r878626, r878627" are follow-up to r878607 and the other long 
   pending Master info leak to the clients.
   Justification:
     1. This group has the most common 'optimization' fix of *not* groking the
        proxied response to find and replace with same string.
     2. Fixes the master information leak via the Location header.
     3. Need this to be ported for the other defect to be ported
        without conflict.
   Votes:
     +1: kameshj

 * r916286, r917512
   This backport depends on the above group only for the conflict free port.
   Justification:
     Vague commit error when server has been configured with <Location /svn/>
     and write through proxy.
   Votes:
     +1: kameshj

 * r917523
   This backport depends on the above 2 groups only for the conflict free port.
   Justification:
     If the configured slave url has the *encodable* characters *write through*
     is not happening rather commit happens in slave itself.
   Votes:
     +1: kameshj

 * r917640, r918211
   Correctly handle invocations of 'svnlook plist --revprop' when
   used with '-t TXN_NAME' instead of '-r REV'.
   r918211 adds a regression test.
   Justification:
     Users are assuming that this works (and trying to employ the
     functionality in pre-commit hooks), but it clearly doesn't.
   Votes:
     +1: cmpilato (r917640 only)
     +1: lgo

 * r922516
   Tell svn+ssh:// users how to get error messages from ssh when there
   is a connection problem.
   Justification:
     Not everyone realises that svn passes the -q option to ssh by default.
   Votes:
     +1: stsp, rhuijben

Veto-blocked changes:
=====================

 * r877552, r877617, r877618, r877619, r877621
   Support using `svnversion` on files and improve some messages printed by
   `svnversion`.
   Justification:
     Some messages printed by `svnversion` are inconsistent and sometimes
     incorrect:
     $ svnversion /usr
     exported
     $ svnversion /bin/ls
     '/bin/ls' not versioned, and not exported
     $ svnversion VERSIONED_FILE
     'VERSIONED_FILE' not versioned, and not exported
     $ svnversion /nonexistent
     subversion/libsvn_wc/questions.c:90: (apr_err=2)
     svn: '/nonexistent' does not exist
     ^^^
     Messages with these revisions backported:
     $ svnversion /usr
     Unversioned directory
     $ svnversion /bin/ls
     Unversioned file
     $ svnversion VERSIONED_FILE
     NUMBER
     $ svnversion /nonexistent
     '/nonexistent' doesn't exist
   Votes:
     +1: arfrever
     -0: cmpilato (Introduces new features and changes output)
     -1: rhuijben (Introduces new features and changes output;
                   I think it should be removed from STATUS)

 * r878078, r878088, r878102, r878196
   Make KWallet window attached to terminal window.
   Justification:
     Without this change, KWallet window can appear behind terminal window
     and is left after killing terminal.
   Votes:
     +1: arfrever
     -0: peters
     -1: stsp ("/proc/%ld/stat" is ugly and Linux-specific -
               would just getenv("WINDOWID") work instead?)

Approved changes:
=================
